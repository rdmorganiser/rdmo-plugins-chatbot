{% extends 'core/page.html' %}
{% load static %}
{% load i18n %}
{% load core_tags %}
{% load chatbot_tags %}

{% block head %}
    <meta name='project' content="{{ project.id }}" />
    <meta name='execute_script_tags' content="{{ settings.TEMPLATES_EXECUTE_SCRIPT_TAGS|lower }}" />
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'projects/css/interview.css' %}" />
    {{ block.super }}
{% endblock %}

{% block js %}
    {{ block.super }}
    <script src="{% static 'projects/js/interview.js' %}" defer></script>
{% endblock %}

{% block sidebar %}

    <div id="sidebar"></div>

{% endblock %}

{% block page %}

    <div id="main" class="interview"></div>

{% endblock %}

{% block extra_body %}
    {% include 'chatbot/contact_modal.html' %}

    <script src="{{ settings.CHATBOT_URL }}/copilot/index.js"></script>
    <script src="{% static 'chatbot/js/copilot.js' %}"></script>
    <script>
        window.mountChainlitWidget({
            language: "{% chatbot_language %}",
            chainlitServer: "{{ settings.CHATBOT_URL }}",
            accessToken: "{% chatbot_token request.user %}",
            customCssUrl: "{% static 'chatbot/css/copilot.css' %}"
        })
        window.addEventListener("chainlit-call-fn", window.copilotEventHandler)
    </script>
{% endblock %}
